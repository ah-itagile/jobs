apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'maven'
apply from: 'gradle/dependencies.gradle'

ext.versionNr = '0.1-SNAPSHOT'
group = 'de.otto'
description = "A MongoDB based JobStore"

sourceCompatibility = 1.6
targetCompatibility = 1.6

repositories {
    maven { url 'http://nexus.lhotse.ov.otto.de:8080/content/groups/public' }
}

configurations {
    publishToNexus
}

artifacts {
    publishToNexus jar
}

test {
    useTestNG()
}

uploadArchives {
    configuration = configurations.publishToNexus
    repositories {
        mavenDeployer {
            repository(url: "http://nexus.lhotse.ov.otto.de:8080/content/repositories/snapshots") {
                authentication(userName: "lhotse_snapshot", password: "lhotse_snapshot123")
            }
            pom {
                groupId = 'de.otto'
                artifactId = 'lhotse-jobstore'
                version = versionNr
            }
        }
    }
}
